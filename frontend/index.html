<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>DeepSeek AI æ™ºèƒ½å¯¹è¯åŠ©æ‰‹</title>
    
    <!-- CSSæ–‡ä»¶å¼•å…¥ -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/graph.css">
    <link rel="stylesheet" href="css/modal.css">
    
    <!-- D3.jsåº“ -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    
    <!-- Markdownæ¸²æŸ“ -->
    <script src="https://cdn.jsdelivr.net/npm/marked@9.1.6/marked.min.js"></script>
    
    <!-- LaTeXæ•°å­¦å…¬å¼æ¸²æŸ“ -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <!-- ä»£ç é«˜äº® -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- å·¦ä¾§è¾¹æ  -->
        <div class="sidebar">
            <!-- ä¾§è¾¹æ æ ‡é¢˜ -->
            <div class="sidebar-header">
                <h2>DeepSeek AI</h2>
                <p>å¯¹è¯åŠ©æ‰‹</p>
            </div>
            
            <!-- ä¸ªäººèµ„æ–™åŒºåŸŸ -->
            <div class="profile-section">
                <div class="profile-header">
                    <div class="profile-avatar" onclick="openProfileModal()">
                        <span id="profileAvatarText">ğŸ‘¤</span>
                        <img id="profileAvatarImg" style="display: none;" />
                        <input type="file" id="profileAvatarUpload" style="display: none;" accept="image/*" onchange="handleAvatarUpload(event)">
                    </div>
                    <div class="profile-info">
                        <h3 id="profileName">ç”¨æˆ·</h3>
                        <span class="profile-status" id="profileStatus" onclick="toggleStatus()">åœ¨çº¿</span>
                    </div>
                </div>
            </div>

            <!-- å¯¹è¯åˆ—è¡¨åŒºåŸŸ -->
            <div class="conversations-section">
                <div class="conversations-header">
                    <h4>å¯¹è¯å†å²</h4>
                    <button class="new-chat-btn" onclick="startNewConversation()">æ–°å¯¹è¯</button>
                </div>
                <div class="conversation-list">
                    <div id="conversationsList">
                        <!-- å¯¹è¯åˆ—è¡¨å°†åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>

            <!-- æ“ä½œæŒ‰é’®åŒºåŸŸ -->
            <div class="sidebar-actions">
                <button class="action-btn" onclick="clearCurrentChat()">æ¸…ç©ºå½“å‰å¯¹è¯</button>
                <button class="action-btn" onclick="exportChat()">å¯¼å‡ºå¯¹è¯</button>
                <button class="action-btn danger" onclick="deleteConversation(currentConversationId)">åˆ é™¤å¯¹è¯</button>
            </div>

            <!-- ç‰ˆæƒä¿¡æ¯ -->
            <div class="sidebar-footer">
                Â© 2024 DeepSeek AI
            </div>
        </div>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <div class="main-content">
            <!-- èŠå¤©å¤´éƒ¨ -->
            <div class="chat-header">
                <h1 id="currentTitle">ä»€ä¹ˆæ˜¯vue</h1>
            </div>
            
            <!-- èŠå¤©å†…å®¹åˆ†æ  -->
            <div class="chat-area">
                <!-- å·¦ä¾§å¯¹è¯åŒº -->
                <div class="chat-messages-container">
                    <div class="chat-messages" id="chatMessages">
                        <!-- å¯¹è¯æ¶ˆæ¯å°†åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
                
                <!-- å³ä¾§åŠ¨æ€å›¾åŒº -->
                <div class="graph-section">
                    <div id="graph-container">
                        <!-- D3.jså›¾è¡¨å°†åœ¨è¿™é‡Œæ¸²æŸ“ -->
                    </div>
                </div>
            </div>
            
            <!-- è¾“å…¥åŒºåŸŸ -->
            <div class="chat-input-container">
                <div class="chat-input-wrapper">
                    <textarea id="chatInput" class="chat-input" placeholder="è¾“å…¥æ‚¨çš„æ¶ˆæ¯..." rows="1"></textarea>
                    <button id="sendBtn" class="send-btn">å‘é€</button>
                </div>
            </div>
        </div>
    </div>

    <!-- åŠ è½½åŠ¨ç”» -->
    <div class="loading" id="loading">
        <div class="loading-dots">
            <div></div>
            <div></div>
            <div></div>
        </div>
        <p>DeepSeek AIæ­£åœ¨æ€è€ƒä¸­...</p>
    </div>

    <!-- ä¸ªäººä¸»é¡µæ¨¡æ€æ¡† -->
    <div class="profile-modal" id="profileModal">
        <div class="profile-modal-content">
            <div class="profile-modal-header">
                <div class="profile-modal-avatar" onclick="document.getElementById('modalAvatarUpload').click()">
                    <span id="modalAvatarText">ğŸ‘¤</span>
                    <img id="modalAvatarImg" style="display: none;" />
                    <input type="file" id="modalAvatarUpload" style="display: none;" accept="image/*" onchange="handleModalAvatarUpload(event)">
                </div>
                <h2>ä¸ªäººèµ„æ–™</h2>
            </div>
            
            <form class="profile-form" onsubmit="saveProfile(event)">
                <div class="form-group">
                    <label for="userName">ç”¨æˆ·å</label>
                    <input type="text" id="userName" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" required>
                </div>
                
                <div class="form-group">
                    <label for="userEmail">é‚®ç®±</label>
                    <input type="email" id="userEmail" placeholder="è¯·è¾“å…¥é‚®ç®±">
                </div>
                
                <div class="form-group">
                    <label for="userBio">ä¸ªäººç®€ä»‹</label>
                    <textarea id="userBio" placeholder="ä»‹ç»ä¸€ä¸‹è‡ªå·±..."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="userLocation">æ‰€åœ¨åœ°</label>
                    <input type="text" id="userLocation" placeholder="è¯·è¾“å…¥æ‰€åœ¨åœ°">
                </div>
                
                <div class="profile-modal-actions">
                    <button type="button" class="modal-btn secondary" onclick="closeProfileModal()">å–æ¶ˆ</button>
                    <button type="submit" class="modal-btn primary">ä¿å­˜</button>
                </div>
            </form>
        </div>
    </div>

    <!-- MathJaxé…ç½® -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            }
        };
    </script>

    <!-- JavaScriptæ–‡ä»¶å¼•å…¥ -->
    <script>
        // å®šä¹‰APIå¯†é’¥å˜é‡ä»¥é¿å…é”™è¯¯
        window.DEEPSEEK_API_KEY = 'your_api_key';
    </script>
    <script src="js/backend-adapter.js"></script>
    <script src="js/app.js"></script>
    <script src="js/graph.js"></script>
    
    <!-- æµ‹è¯•å‘é€åŠŸèƒ½çš„æŒ‰é’® -->
    <div style="position: fixed; top: 10px; right: 10px; z-index: 9999;">
        <button onclick="window.testSend()" style="background: #4CAF50; color: white; border: none; padding: 8px 12px; border-radius: 4px; margin-right: 5px;">æµ‹è¯•å‘é€</button>
        <button onclick="window.fixSend()" style="background: #ff9800; color: white; border: none; padding: 8px 12px; border-radius: 4px;">ä¿®å¤å‘é€</button>
        <div style="background: rgba(0,0,0,0.8); color: white; padding: 4px 8px; border-radius: 4px; font-size: 10px; margin-top: 5px; text-align: center; white-space: nowrap;">
            ğŸ’¡ æ‹–æ‹½AIå›å¤åˆ°å³ä¾§ç”Ÿæˆå›¾
        </div>
    </div>
</body>
</html> 